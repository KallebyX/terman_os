{% extends "base.html" %}
{% block title %}Gerenciar Produtos{% endblock %}
{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">Lista de Produtos</h2>
    <a href="{{ url_for('admin.criar_produto') }}" class="btn btn-success mb-3">Novo Produto</a>
    <table class="table table-bordered table-hover">
       <thead>
    <tr>
        <th>Nome</th>
        <th>Categoria</th>
        <th>Preço</th>
        <th>Estoque</th>
        <th>Ações</th>
    </tr>
</thead>
<tbody>
    {% for produto in produtos %}
    <tr>
        <td>{{ produto.nome }}</td>
        <td>{{ produto.categoria.nome if produto.categoria else 'Sem categoria' }}</td>
        <td>R$ {{ '%.2f'|format(produto.preco) }}</td>
        <td>{{ produto.estoque }}</td>
        <td>
            <a href="{{ url_for('admin.editar_produto', produto_id=produto.id) }}" class="btn btn-sm btn-warning">Editar</a>
            <form method="POST" action="{{ url_for('admin.excluir_produto', produto_id=produto.id) }}" style="display:inline-block;" onsubmit="return confirm('Tem certeza que deseja excluir este produto?');">
                <button type="submit" class="btn btn-sm btn-danger">Excluir</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</tbody>
    </table>
</div>
{% endblock %}